// SPDX-License-Identifier: MIT
pragma solidity ^0.8.13;

import "forge-std/Test.sol";
import "../src/Pairings.sol";

contract PairingsTest is Test {
    Pairings public pairings;

    function setUp() public {
        pairings = new Pairings();
    }

    //     struct G1Point {
    //         uint256 x;
    //         uint256 y;
    //     }

    //     struct G2Point {
    //         uint256[2] x;
    //         uint256[2] y;
    //     }

    //     // // pairing(G2, neg(G1)) + pairing(G2,G1) = 0
    //     // // e(G1,G2)^-1 + e(G1,G2)^1 = 0
    //     // // -1 + 1 = 0
    //     // function testEasy2Pairing() public view {
    //     //     // neg(G1)
    //     //     uint256 aG1_x = 1;
    //     //     uint256 aG1_y = 21888242871839275222246405745257275088696311157297823662689037894645226208581;

    //     //     // G2
    //     //     uint256 bG2_x1 = 10857046999023057135944570762232829481370756359578518086990519993285655852781;
    //     //     uint256 bG2_x2 = 11559732032986387107991004021392285783925812861821192530917403151452391805634;
    //     //     uint256 bG2_y1 = 8495653923123431417604973247489272438418190587263600148770280649306958101930;
    //     //     uint256 bG2_y2 = 4082367875863433681332203403145435568316851327593401208105741076214120093531;

    //     //     // G1
    //     //     uint256 cG1_x = 1;
    //     //     uint256 cG1_y = 2;

    //     //     // G2
    //     //     uint256 dG2_x1 = 10857046999023057135944570762232829481370756359578518086990519993285655852781;
    //     //     uint256 dG2_x2 = 11559732032986387107991004021392285783925812861821192530917403151452391805634;
    //     //     uint256 dG2_y1 = 8495653923123431417604973247489272438418190587263600148770280649306958101930;
    //     //     uint256 dG2_y2 = 4082367875863433681332203403145435568316851327593401208105741076214120093531;

    //     //     uint256[12] memory points =
    //     //         [aG1_x, aG1_y, bG2_x2, bG2_x1, bG2_y2, bG2_y1, cG1_x, cG1_y, dG2_x2, dG2_x1, dG2_y2, dG2_y1];

    //     //     bool x = pairings.run(points);
    //     //     console2.log("result:", x);
    //     // }

    //     // function testEasy2PairingWithBytes() public view {
    //     //     // neg(G1)
    //     //     uint256 aG1_x = 1;
    //     //     uint256 aG1_y = 21888242871839275222246405745257275088696311157297823662689037894645226208581;

    //     //     // G2
    //     //     uint256 bG2_x1 = 10857046999023057135944570762232829481370756359578518086990519993285655852781;
    //     //     uint256 bG2_x2 = 11559732032986387107991004021392285783925812861821192530917403151452391805634;
    //     //     uint256 bG2_y1 = 8495653923123431417604973247489272438418190587263600148770280649306958101930;
    //     //     uint256 bG2_y2 = 4082367875863433681332203403145435568316851327593401208105741076214120093531;

    //     //     // G1
    //     //     uint256 cG1_x = 1;
    //     //     uint256 cG1_y = 2;

    //     //     // G2
    //     //     uint256 dG2_x1 = 10857046999023057135944570762232829481370756359578518086990519993285655852781;
    //     //     uint256 dG2_x2 = 11559732032986387107991004021392285783925812861821192530917403151452391805634;
    //     //     uint256 dG2_y1 = 8495653923123431417604973247489272438418190587263600148770280649306958101930;
    //     //     uint256 dG2_y2 = 4082367875863433681332203403145435568316851327593401208105741076214120093531;

    //     //     bytes memory pointsBytes =
    //     //         abi.encode(aG1_x, aG1_y, bG2_x2, bG2_x1, bG2_y2, bG2_y1, cG1_x, cG1_y, dG2_x2, dG2_x1, dG2_y2, dG2_y1);

    //     //     bool x = pairings.verifyBytes(pointsBytes);
    //     //     console2.log("result:", x);
    //     // }

    function testEasy3PairingWithBytes() public view {
        // multiply(neg(G1),2)
        uint256 aG1_x = 1368015179489954701390400359078579693043519447331113978918064868415326638035;
        uint256 aG1_y = 11970132820537103637166003141937572314130795164147247315533067598634108082819;

        // G2
        uint256 bG2_x1 = 10857046999023057135944570762232829481370756359578518086990519993285655852781;
        uint256 bG2_x2 = 11559732032986387107991004021392285783925812861821192530917403151452391805634;
        uint256 bG2_y1 = 8495653923123431417604973247489272438418190587263600148770280649306958101930;
        uint256 bG2_y2 = 4082367875863433681332203403145435568316851327593401208105741076214120093531;

        // G1
        uint256 cG1_x = 1;
        uint256 cG1_y = 2;

        // G2
        uint256 dG2_x1 = 10857046999023057135944570762232829481370756359578518086990519993285655852781;
        uint256 dG2_x2 = 11559732032986387107991004021392285783925812861821192530917403151452391805634;
        uint256 dG2_y1 = 8495653923123431417604973247489272438418190587263600148770280649306958101930;
        uint256 dG2_y2 = 4082367875863433681332203403145435568316851327593401208105741076214120093531;

        // G1
        uint256 eG1_x = 1;
        uint256 eG1_y = 2;

        // G2
        uint256 fG2_x1 = 10857046999023057135944570762232829481370756359578518086990519993285655852781;
        uint256 fG2_x2 = 11559732032986387107991004021392285783925812861821192530917403151452391805634;
        uint256 fG2_y1 = 8495653923123431417604973247489272438418190587263600148770280649306958101930;
        uint256 fG2_y2 = 4082367875863433681332203403145435568316851327593401208105741076214120093531;

        bytes memory pointsBytes = abi.encode(
            aG1_x,
            aG1_y,
            bG2_x2,
            bG2_x1,
            bG2_y2,
            bG2_y1,
            cG1_x,
            cG1_y,
            dG2_x2,
            dG2_x1,
            dG2_y2,
            dG2_y1,
            eG1_x,
            eG1_y,
            fG2_x2,
            fG2_x1,
            fG2_y2,
            fG2_y1
        );

        bool x = pairings.verifyBytes(pointsBytes);
        console2.log("result:", x);
    }

    function testEasy4PairingWithBytes() public view {
        // multiply(neg(G1),3)
        uint256 aG1_x = 3353031288059533942658390886683067124040920775575537747144343083137631628272;
        uint256 aG1_y = 2566709105286906361299853307776759647279481117519912024775619069693558446822;

        // G2
        uint256 bG2_x1 = 10857046999023057135944570762232829481370756359578518086990519993285655852781;
        uint256 bG2_x2 = 11559732032986387107991004021392285783925812861821192530917403151452391805634;
        uint256 bG2_y1 = 8495653923123431417604973247489272438418190587263600148770280649306958101930;
        uint256 bG2_y2 = 4082367875863433681332203403145435568316851327593401208105741076214120093531;

        // G1
        uint256 cG1_x = 1;
        uint256 cG1_y = 2;

        // G2
        uint256 dG2_x1 = 10857046999023057135944570762232829481370756359578518086990519993285655852781;
        uint256 dG2_x2 = 11559732032986387107991004021392285783925812861821192530917403151452391805634;
        uint256 dG2_y1 = 8495653923123431417604973247489272438418190587263600148770280649306958101930;
        uint256 dG2_y2 = 4082367875863433681332203403145435568316851327593401208105741076214120093531;

        // G1
        uint256 eG1_x = 1;
        uint256 eG1_y = 2;

        // G2
        uint256 fG2_x1 = 10857046999023057135944570762232829481370756359578518086990519993285655852781;
        uint256 fG2_x2 = 11559732032986387107991004021392285783925812861821192530917403151452391805634;
        uint256 fG2_y1 = 8495653923123431417604973247489272438418190587263600148770280649306958101930;
        uint256 fG2_y2 = 4082367875863433681332203403145435568316851327593401208105741076214120093531;

        // G1
        uint256 gG1_x = 1;
        uint256 gG1_y = 2;

        // G2
        uint256 hG2_x1 = 10857046999023057135944570762232829481370756359578518086990519993285655852781;
        uint256 hG2_x2 = 11559732032986387107991004021392285783925812861821192530917403151452391805634;
        uint256 hG2_y1 = 8495653923123431417604973247489272438418190587263600148770280649306958101930;
        uint256 hG2_y2 = 4082367875863433681332203403145435568316851327593401208105741076214120093531;

        bytes memory pointsBytes = abi.encode(
            aG1_x,
            aG1_y,
            bG2_x2,
            bG2_x1,
            bG2_y2,
            bG2_y1,
            cG1_x,
            cG1_y,
            dG2_x2,
            dG2_x1,
            dG2_y2,
            dG2_y1,
            eG1_x,
            eG1_y,
            fG2_x2,
            fG2_x1,
            fG2_y2,
            fG2_y1,
            gG1_x,
            gG1_y,
            hG2_x2,
            hG2_x1,
            hG2_y2,
            hG2_y1
        );

        bool x = pairings.verifyBytes(pointsBytes);
        console2.log("result:", x);
    }

    //     // // pairing(multiply(neg(G1), 10),multiply(G2,5)) == pairing(multiply(G1,25),multiply(G2,2))
    //     // // e(G1,G2)^(-10*5) + e(G1,G2)^(25*2) = 0
    //     // // -50 + 50 = 0
    //     // function testHard2Pairing() public view {
    //     //     // multiply(neg(G1), 10)
    //     //     uint256 aG1_x = 4444740815889402603535294170722302758225367627362056425101568584910268024244;
    //     //     uint256 aG1_y = 11350979775309792057627585728092606167309854128733159954336302813744955667163;

    //     //     // multiply(G2,5)
    //     //     uint256 bG2_x1 = 20954117799226682825035885491234530437475518021362091509513177301640194298072;
    //     //     uint256 bG2_x2 = 4540444681147253467785307942530223364530218361853237193970751657229138047649;
    //     //     uint256 bG2_y1 = 21508930868448350162258892668132814424284302804699005394342512102884055673846;
    //     //     uint256 bG2_y2 = 11631839690097995216017572651900167465857396346217730511548857041925508482915;

    //     //     // multiply(G1,25)
    //     //     uint256 cG1_x = 20765039372871530718554589730410158162413780974122112544611863764810626751360;
    //     //     uint256 cG1_y = 2444183914824638066910831265243126275246160293098948571390980460351548298384;

    //     //     // multiply(G2,2)
    //     //     uint256 dG2_x1 = 18029695676650738226693292988307914797657423701064905010927197838374790804409;
    //     //     uint256 dG2_x2 = 14583779054894525174450323658765874724019480979794335525732096752006891875705;
    //     //     uint256 dG2_y1 = 2140229616977736810657479771656733941598412651537078903776637920509952744750;
    //     //     uint256 dG2_y2 = 11474861747383700316476719153975578001603231366361248090558603872215261634898;

    //     //     uint256[12] memory points =
    //     //         [aG1_x, aG1_y, bG2_x2, bG2_x1, bG2_y2, bG2_y1, cG1_x, cG1_y, dG2_x2, dG2_x1, dG2_y2, dG2_y1];

    //     //     bool x = pairings.run(points);
    //     //     console2.log("result:", x);
    //     // }

    //     // e(G1,G2)^(-10*5) + e(G1,G2)^(10) + e(G1,G2)^(40) = 0
    //     // pairing(multiply(neg(G1), 10),multiply(G2,5))
    //     // pairing(multiply(G1,10),G2) = e(G1,G2)^(10)
    //     // pairing(multiply(G1,40),G2) = e(G1,G2)^(40)
    //     function testEasy3Pairing() public view {
    //         // multiply(neg(G1), 10)
    //         uint256 aG1_x = 4444740815889402603535294170722302758225367627362056425101568584910268024244;
    //         uint256 aG1_y = 11350979775309792057627585728092606167309854128733159954336302813744955667163;

    //         // multiply(G2,5)
    //         uint256 bG2_x1 = 20954117799226682825035885491234530437475518021362091509513177301640194298072;
    //         uint256 bG2_x2 = 4540444681147253467785307942530223364530218361853237193970751657229138047649;
    //         uint256 bG2_y1 = 21508930868448350162258892668132814424284302804699005394342512102884055673846;
    //         uint256 bG2_y2 = 11631839690097995216017572651900167465857396346217730511548857041925508482915;

    //         // multiply(G1,10)
    //         uint256 cG1_x = 4444740815889402603535294170722302758225367627362056425101568584910268024244;
    //         uint256 cG1_y = 10537263096529483164618820017164668921386457028564663708352735080900270541420;

    //         // G2
    //         uint256 dG2_x1 = 10857046999023057135944570762232829481370756359578518086990519993285655852781;
    //         uint256 dG2_x2 = 11559732032986387107991004021392285783925812861821192530917403151452391805634;
    //         uint256 dG2_y1 = 8495653923123431417604973247489272438418190587263600148770280649306958101930;
    //         uint256 dG2_y2 = 4082367875863433681332203403145435568316851327593401208105741076214120093531;

    //         // G1 * 40
    //         uint256 eG1_x = 20003165157599505724822627051277038367118176092311529681748895592930988869629;
    //         uint256 eG1_y = 19521843329763029480438735371451116678177931327248380146196642919230980579494;

    //         // G2
    //         uint256 fG2_x1 = 10857046999023057135944570762232829481370756359578518086990519993285655852781;
    //         uint256 fG2_x2 = 11559732032986387107991004021392285783925812861821192530917403151452391805634;
    //         uint256 fG2_y1 = 8495653923123431417604973247489272438418190587263600148770280649306958101930;
    //         uint256 fG2_y2 = 4082367875863433681332203403145435568316851327593401208105741076214120093531;

    //         // uint256[18] memory points = [
    //         //     aG1_x,
    //         //     aG1_y,
    //         //     bG2_x2,
    //         //     bG2_x1,
    //         //     bG2_y2,
    //         //     bG2_y1,
    //         //     cG1_x,
    //         //     cG1_y,
    //         //     dG2_x2,
    //         //     dG2_x1,
    //         //     dG2_y2,
    //         //     dG2_y1,
    //         //     eG1_x,
    //         //     eG1_y,
    //         //     fG2_x1,
    //         //     fG2_x2,
    //         //     fG2_y1,
    //         //     fG2_y2
    //         // ];

    //         bytes memory pointsBytes = abi.encode(
    //             aG1_x,
    //             aG1_y,
    //             bG2_x2,
    //             bG2_x1,
    //             bG2_y2,
    //             bG2_y1,
    //             cG1_x,
    //             cG1_y,
    //             dG2_x2,
    //             dG2_x1,
    //             dG2_y2,
    //             dG2_y1,
    //             eG1_x,
    //             eG1_y,
    //             fG2_x1,
    //             fG2_x2,
    //             fG2_y1,
    //             fG2_y2
    //         );

    //         // bool x = pairings.verifyBytes(pointsBytes);
    //         // console2.log("result:", x);

    //         // bool x = pairings.run3(points);
    //         // console2.log("result:", x);
    //     }

    //     // -A_1 * B_2  +  alpha_1 * beta_2  +  X_1 * gamma_2  +  C_1 * delta_2  = 0 for ethereum pre-compile 8
    //     // X_1 = x_1 * G1  +  x_2 * G1  +  x_3 * G1
    //     // function test4Pairing() public view {
    //     //     // initialize variables
    //     //     Pairings.G1Point memory A1;
    //     //     Pairings.G2Point memory B2;
    //     //     Pairings.G1Point memory Alpha1;
    //     //     Pairings.G2Point memory Beta2;
    //     //     Pairings.G1Point memory X1;
    //     //     Pairings.G2Point memory Gamma2;
    //     //     Pairings.G1Point memory C1;
    //     //     Pairings.G2Point memory Delta2;

    //     //     // Generate X1
    //     //     uint256[] memory x1_x2_x3 = new uint256[](3);
    //     //     x1_x2_x3[0] = 5;
    //     //     x1_x2_x3[1] = 10;
    //     //     x1_x2_x3[2] = 35;
    //     //     (X1.x, X1.y) = pairings.createX_1(x1_x2_x3);

    //     //     // -A1B2 = pairing(multiply(G2,50),neg(multiply(G1,2))
    //     //     A1.x = 1368015179489954701390400359078579693043519447331113978918064868415326638035;
    //     //     A1.y = 11970132820537103637166003141937572314130795164147247315533067598634108082819;
    //     //     B2.x[0] = 17322369349692087243447028505687535678015944818229625650476124495994659493777;
    //     //     B2.y[0] = 13380007740614884042676552027792669517352976714172339801095960593301186558468;
    //     //     B2.x[1] = 15491351605040989835654031651748126421046576685865653138953335697202469887252;
    //     //     B2.y[1] = 16468620448456686443772276482522600812800837353895826753363425853415626031564;

    //     //     // alpha_1 * beta_2 pairing(G2,multiply(G1,20))
    //     //     Alpha1.x = 18947110137775984544896515092961257947872750783784269176923414004072777296602;
    //     //     Alpha1.y = 12292085037693291586083644966434670280746730626861846747147579999202931064992;
    //     //     Beta2.x[0] = 10857046999023057135944570762232829481370756359578518086990519993285655852781;
    //     //     Beta2.y[0] = 11559732032986387107991004021392285783925812861821192530917403151452391805634;
    //     //     Beta2.x[1] = 8495653923123431417604973247489272438418190587263600148770280649306958101930;
    //     //     Beta2.y[1] = 4082367875863433681332203403145435568316851327593401208105741076214120093531;

    //     //     // X_1 * gamma_2
    //     //     Gamma2.x[0] = 10857046999023057135944570762232829481370756359578518086990519993285655852781;
    //     //     Gamma2.y[0] = 11559732032986387107991004021392285783925812861821192530917403151452391805634;
    //     //     Gamma2.x[1] = 8495653923123431417604973247489272438418190587263600148770280649306958101930;
    //     //     Gamma2.y[1] = 4082367875863433681332203403145435568316851327593401208105741076214120093531;

    //     //     //  C_1 * delta_2
    //     //     C1.x = 1;
    //     //     C1.y = 2;
    //     //     Delta2.x[0] = 16254737008305706031004429264063885572618336716292470244842285039341668886874;
    //     //     Delta2.y[0] = 3045295354179676677849867948999926981809716450107785272685219528794174444834;
    //     //     Delta2.x[1] = 10847281460042142598816270676372539992803021388916026621484136992759522018115;
    //     //     Delta2.y[1] = 3687031281311398245656729489850260357742732581131462810186398483442070052844;

    //     //     bool x = pairings.pairingVerifier(A1, B2, Alpha1, Beta2, X1, Gamma2, C1, Delta2);
    //     //     console2.log("result:", x);
    //     // }
    // }
}
